# Manual Network Enumeration

### Scan Hosts
```
for i in {1..255}; do (ping -c 1 192.168.1.${i} | grep “bytes from” &); done
```
### Scan for Open Ports
```
 for i in {1..65535}; do (echo > /dev/tcp/192.168.1.1/$i) >/dev/null 2>&1 && echo $i is open; done
```


# SSH Tunneling / Port Forwarding 

### Local Port Forwarding
```
ssh -L {local_port}:{remote_ip}:{remote_port} root@{target_ip} -i id_rsa
```

### Dynamic port forwarding with proxychains

- Has limitations: Produces inaccurate results i.e. nmap etc
- Proxychains preparation (Change localPort):
  
  ```
  sudo echo "socks4 127.0.0.1 localPort" >> /etc/proxychains.conf
  ```
- Command to establish connection (Basic command is just "-D"):

  ```
  ssh -NfD localPort user@sshGateway
  ```
- Make use of proxychains:
  ```
  #-sT -Pn for proxychains
  proxychains nmap -v sT -Pn -T4 -p21,22,25,80,139,443,445,3389,8080 10.0.1.0/24 
  proxychains msfconsole 
  proxychains rdesktop targetIP -u user -p password
  ``` 


# SSHuttle

- Recommended and does not need root on pivot machine)
- Has limitations: Does not really work with nmap
- Use a static nmap binary instead on the compromised host
  
```
sshuttle -r root@10.200.57.200 10.200.57.0/24 --ssh-cmd "ssh -i id_rsa" -x 10.200.57.200
```
